<!DOCTYPE html>
<html>
<head>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Quicksand:wght@300&family=Courier+Prime:wght@700&display=swap" rel="stylesheet">
  <style>
    body, html {
      margin: 0; padding: 0; height: 100%;
      background: url('https://i.pinimg.com/736x/ba/d4/14/bad4142a111da56f80b414eb2b0a9eb8.jpg') no-repeat center center fixed;
      background-size: cover; font-family: 'Quicksand', sans-serif; color: #fdf5e6;
      display: flex; justify-content: center; align-items: center; overflow: hidden;
    }
    .game-container {
      width: 80%; max-width: 600px; background: rgba(0,0,0,0.9);
      backdrop-filter: blur(10px); border: 2px solid #d4af37;
      padding: 40px; border-radius: 15px; text-align: center;
    }
    #story-text { font-family: 'Courier Prime', monospace; font-size: 1.1rem; line-height: 1.6; margin-bottom: 30px; }
    .choice-btn {
      display: block; width: 100%; background: none; border: 1px solid #d4af37;
      color: #fdf5e6; padding: 12px; margin: 10px 0; cursor: pointer;
      font-family: 'Cinzel'; border-radius: 5px;
    }
    .choice-btn:hover { background: #d4af37; color: #000; }
    .inventory { margin-top: 20px; font-size: 0.8rem; color: #d4af37; font-style: italic; }
  </style>
</head>
<body>

<div class="game-container" id="main-box">
  <div id="story-text">Loading the ridiculousness...</div>
  <div id="choices"></div>
  <div class="inventory" id="inv-display">Inventory: Empty</div>
  <button onclick="location.href='index.html'" style="margin-top:30px; background:none; border:none; color:rgba(255,255,255,0.4); cursor:pointer; font-size:0.8rem;">[ Return to the Sanctuary ]</button>
</div>

<script>
  // This part is the "Brain" of the game
  let inventory = [];

  const scenes = {
    start: {
      text: "You wake up in a field of giant clovers. A single Nippon Biscuit sits on a stump. It looks oddly majestic and slightly buttery.",
      choices: [
        { text: "Eat the Nippon Biscuit", next: "eat_biscuit" },
        { text: "Look under the stump", next: "peas_intro" }
      ]
    },
    eat_biscuit: {
      text: "It's delicious. Suddenly, a cute but stinky little dog wanders by. He smells like wet socks and magic. He seems to want a snack.",
      choices: [
        { text: "Pet the stinky dog", next: "pet_dog" },
        { text: "Check your pockets for more biscuits", next: "empty_pockets" }
      ]
    },
    peas_intro: {
      text: "You find a tiny person named Peas. He is literally a green pea in a top hat. He whispers: 'Tell me... why do feet have 10 toes?'",
      choices: [
        { text: "Tell a foot joke", next: "feet_joke" },
        { text: "Run away from the sentient vegetable", next: "start" }
      ]
    },
    feet_joke: {
      text: "Peas laughs so hard he begins to caramelize. You gain 'Caramelizing Onions'! The stinky dog wanders over, lured by the smell.",
      action: () => { addToInventory("Caramelizing Onions"); },
      choices: [
        { text: "Pet the stinky dog", next: "pet_dog" }
      ]
    },
    pet_dog: {
      text: "The dog wags his tail. You have completed the first fragment of this weird journey!",
      choices: [
        { text: "Follow the dog to the Silly Realm", next: "silly_exit" }
      ]
    },
    empty_pockets: {
      text: "Only lint. The stinky dog looks disappointed. Peas the pea rolls by and mocks you.",
      choices: [
        { text: "Try again", next: "start" }
      ]
    },
    silly_exit: {
      text: "The dog leads you to a portal made of bubbles. You're leaving the Trinket Box now...",
      action: () => { 
        setTimeout(() => {
          window.location.href = "https://theuselessweb.com/"; 
        }, 2000);
      },
      choices: []
    }
  };

  function renderScene(sceneKey) {
    console.log("Rendering scene:", sceneKey);
    const scene = scenes[sceneKey];
    if (!scene) return;

    if (scene.action) scene.action();

    document.getElementById('story-text').innerText = scene.text;
    const choicesDiv = document.getElementById('choices');
    choicesDiv.innerHTML = "";

    if (scene.choices) {
      scene.choices.forEach(choice => {
        const btn = document.createElement('button');
        btn.className = 'choice-btn';
        btn.innerText = choice.text;
        btn.onclick = () => renderScene(choice.next);
        choicesDiv.appendChild(btn);
      });
    }
  }

  function addToInventory(item) {
    if (!inventory.includes(item)) {
      inventory.push(item);
      document.getElementById('inv-display').innerText = "Inventory: " + inventory.join(", ");
    }
  }

  // Start the game!
  window.onload = () => {
    renderScene('start');
  };
</script>

</body>
</html>
