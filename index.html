<!DOCTYPE html>
<html>
<head>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Quicksand:wght@300&family=Courier+Prime:wght@700&display=swap" rel="stylesheet">
  <style>
    body, html {
      margin: 0; padding: 0; height: 100%;
      background: url('https://i.pinimg.com/736x/ba/d4/14/bad4142a111da56f80b414eb2b0a9eb8.jpg') no-repeat center center fixed;
      background-size: cover; overflow: hidden; font-family: 'Quicksand', sans-serif;
      color: #fdf5e6;
    }

    /* Animations */
    @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-20px); } }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

    .entrance-button {
      position: absolute; width: 120px; height: 120px;
      background-size: contain; background-repeat: no-repeat;
      background-color: transparent; border: none; cursor: pointer;
      filter: drop-shadow(0 10px 15px rgba(0,0,0,0.4));
      animation: float 4s ease-in-out infinite;
      transition: transform 0.3s;
    }
    .entrance-button:hover { transform: scale(1.2) !important; filter: brightness(1.2); }

    /* Shell Placements */
    .shell-diary { background-image: url('https://i.pinimg.com/736x/5f/27/3c/5f273c72f5d8420be067d93ef87ccbda.jpg'); top: 20%; left: 15%; }
    .shell-color { background-image: url('https://i.pinimg.com/736x/27/0e/68/270e6837697de77f0b061e05135b3e69.jpg'); top: 60%; left: 25%; animation-delay: 1s; }
    .shell-game  { background-image: url('https://i.pinimg.com/736x/3a/a7/4a/3aa74ac23f646d71302206e3bd70286d.jpg'); top: 40%; left: 70%; animation-delay: 2s; }
    .shell-gallery { background-image: url('https://i.pinimg.com/736x/9f/1c/ee/9f1cee474d94aba8ef5bdabc1a3f41bd.jpg'); top: 75%; left: 60%; animation-delay: 2.5s; }

    .overlay {
      display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.85); backdrop-filter: blur(15px);
      flex-direction: column; justify-content: center; align-items: center;
      z-index: 10; animation: fadeIn 0.8s;
    }

    /* Diary & Gallery Styling */
    #diary-input, #img-url-input {
      width: 60%; max-width: 500px; background: rgba(255,255,255,0.1);
      border: 1px solid #d4af37; color: #fdf5e6; padding: 15px;
      font-family: 'Courier Prime', monospace; border-radius: 8px;
    }
    
    #diary-wall, #gallery-wall {
      width: 70%; max-height: 350px; overflow-y: auto;
      margin-top: 20px; display: flex; flex-direction: column; gap: 15px;
    }

    .diary-entry {
      background: rgba(253, 245, 230, 0.05); border-left: 3px solid #d4af37;
      padding: 15px; font-family: 'Courier Prime'; font-size: 0.9rem; white-space: pre-wrap;
    }

    .entry-date { color: #d4af37; font-size: 0.7rem; display: block; margin-bottom: 5px; }

    #gallery-wall { flex-direction: row; flex-wrap: wrap; justify-content: center; }
    .photo-card img { width: 180px; border: 1px solid #d4af37; border-radius: 5px; transition: 0.3s; }
    .photo-card img:hover { transform: scale(1.05); }

    .back-btn {
      margin-top: 20px; background: none; border: 1px solid #fdf5e6;
      color: white; padding: 10px 20px; cursor: pointer; font-family: 'Cinzel';
    }
    .back-btn:hover { background: #d4af37; color: #000; }

    .show { display: flex !important; }
    .hide { display: none !important; }
  </style>
</head>
<body>

<audio id="myAudio" loop><source src="fairymusic.mp3" type="audio/mpeg"></audio>

<div id="landing-page">
  <button class="entrance-button shell-diary" onclick="openSection('diary-page')"></button>
  <button class="entrance-button shell-color" onclick="openSection('color-page'); generateColor();"></button>
  <button class="entrance-button shell-game" onclick="openSection('game-page')"></button>
  <button class="entrance-button shell-gallery" onclick="openSection('gallery-overlay')"></button>
</div>

<div id="diary-page" class="overlay">
  <h1 style="font-family: 'Cinzel'">The Shared Altar</h1>
  <textarea id="diary-input" placeholder="Type a thought..."></textarea>
  <div style="margin-top:10px;">
    <button class="back-btn" onclick="saveEntry()">Pin to My Wall</button>
    <button class="back-btn" onclick="clearDiary()" style="border-color: #ff4d4d; color: #ff4d4d;">Clear My View</button>
  </div>
  
  <div id="diary-wall">
    <div class="diary-entry"><span class="entry-date">SYSTEM</span>Welcome to the Trinket Box. This is where memories live.</div>
    </div>
  
  <button class="back-btn" onclick="closeAll()">Go Back</button>
</div>

<div id="gallery-overlay" class="overlay">
  <h1 style="font-family: 'Cinzel'">Memory Gallery</h1>
  <div style="margin-bottom: 20px;">
    <input type="text" id="img-url-input" placeholder="Paste Pinterest Image Link...">
    <button class="back-btn" onclick="addLinkToGallery()">Pin Image</button>
  </div>
  <div id="gallery-wall">
     <div class="photo-card"><img src="https://i.pinimg.com/736x/d3/5c/1a/d35c1accff509b6eeb68cb71b74f0fb3.jpg"></div>
  </div>
  <button class="back-btn" onclick="closeAll()">Go Back</button>
</div>

<div id="color-page" class="overlay">
  <h1 style="font-family: 'Cinzel'">Color of the Day</h1>
  <div id="color-display" style="width:150px; height:150px; border-radius:50%; border:4px solid white; margin-bottom:20px;"></div>
  <h2 id="color-name" style="font-family: 'Courier Prime'">---</h2>
  <button class="back-btn" onclick="closeAll()">Go Back</button>
</div>

<div id="game-page" class="overlay">
  <h1 style="font-family: 'Cinzel'; margin-bottom: 40px;">Choose a Fragment</h1>
  <div style="display:flex; gap:30px;">
    <button onclick="alert('You chose Kindness')" style="background:url('https://i.pinimg.com/736x/8f/c9/7a/8fc97a066552a4505041075678393041.jpg'); width:150px; height:200px; background-size:cover; border:2px solid gold; cursor:pointer;"></button>
    <button onclick="alert('You chose Resilience')" style="background:url('https://i.pinimg.com/736x/01/9b/6c/019b6c00676a02b667850247677943d3.jpg'); width:150px; height:200px; background-size:cover; border:2px solid gold; cursor:pointer;"></button>
  </div>
  <button class="back-btn" onclick="closeAll()">Go Back</button>
</div>

<script>
  window.onload = function() {
    loadLocalDiary();
  };

  function saveEntry() {
    const text = document.getElementById('diary-input').value;
    if(!text) return;
    const entries = JSON.parse(localStorage.getItem('trinketEntries') || "[]");
    entries.unshift({text: text, date: new Date().toLocaleDateString()});
    localStorage.setItem('trinketEntries', JSON.stringify(entries));
    document.getElementById('diary-input').value = "";
    loadLocalDiary();
    alert("Pinned to your local view! To make it permanent for everyone, send the text to Sashalama!");
  }

  function loadLocalDiary() {
    const wall = document.getElementById('diary-wall');
    const entries = JSON.parse(localStorage.getItem('trinketEntries') || "[]");
    // We don't want to clear the 'permanent' ones, so we just add the local ones at the top
    entries.forEach(e => {
      const div = document.createElement('div');
      div.className = 'diary-entry';
      div.innerHTML = `<span class="entry-date">${e.date} (Local)</span>${e.text}`;
      wall.prepend(div);
    });
  }

  function clearDiary() {
    localStorage.removeItem('trinketEntries');
    location.reload();
  }

  function addLinkToGallery() {
    const url = document.getElementById('img-url-input').value;
    if(!url) return;
    const wall = document.getElementById('gallery-wall');
    const div = document.createElement('div');
    div.className = 'photo-card';
    div.innerHTML = `<img src="${url}">`;
    wall.prepend(div);
    document.getElementById('img-url-input').value = "";
  }

  function openSection(id) {
    document.getElementById('myAudio').play();
    document.getElementById(id).classList.add('show');
    document.getElementById('landing-page').classList.add('hide');
  }

  function closeAll() {
    document.querySelectorAll('.overlay').forEach(el => el.classList.remove('show'));
    document.getElementById('landing-page').classList.remove('hide');
  }

  function generateColor() {
    const colors = [{name:"RUBY",hex:"#9b111e"},{name:"SAPPHIRE",hex:"#0f52ba"},{name:"EMERALD",hex:"#50c878"}];
    const r = colors[Math.floor(Math.random()*colors.length)];
    document.getElementById('color-display').style.backgroundColor = r.hex;
    document.getElementById('color-name').innerText = r.name;
  }
</script>
</body>
</html>
